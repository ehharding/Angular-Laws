<!--
 - This file serves as the core, or root, component template. It is always present and forms the main application template.
 -
 - {@link https://angular.io/guide/architecture#components Angular Component Guide}
 -->

<div class="pf-app">
  <main>
    <!-- If The Sidenav Drawer Is Shown, It Is Composed Of A List Of Navigation Items Synonymous With The Larger Toolbar But In A Compact List -->
    <mat-drawer-container class="h-100 w-100 position-absolute">
      <mat-drawer #drawer class="w-100">
        <mat-nav-list class="fw-bold">
          <!-- List Of Application Pages -->
          <div mat-subheader>PAGES</div>

          <a mat-list-item [href]="AppRoute.Home" [routerLink]="AppRoute.Home" (click)="drawer.close()">
            <mat-icon class="me-2" color="primary">import_contacts</mat-icon>
            <span>Pocket Fic</span>
          </a>

          <a mat-list-item [href]="AppRoute.Contributors" [routerLink]="AppRoute.Contributors"
             (click)="drawer.close()">
            <span>Contributors</span>
          </a>

          <a *ngIf="!currentUser?.jwtToken" mat-list-item [href]="AppRoute.Login" [routerLink]="AppRoute.Login" (click)="drawer.close()">
            <span>Log In</span>
          </a>

          <button *ngIf="currentUser?.jwtToken" mat-list-item (click)="drawer.close()">
            <strong>{{ currentUser?.userName }}</strong>
          </button>

          <div mat-subheader>THEME</div>

          <button *ngFor="let theme of allThemes" mat-list-item [disabled]="theme.bundleName === activeTheme" (click)="setApplicationTheme(theme.bundleName)">
            <!-- Display A Checkmark Next To The Active Theme -->
            <mat-icon *ngIf="theme.bundleName === activeTheme" class="me-2">check</mat-icon>
            <!-- Display An Empty Icon Which Acts Like A Spacer Next To All Of The Other Themes -->
            <mat-icon *ngIf="!(theme.bundleName === activeTheme)" class="me-2"></mat-icon>

            <mat-icon class="me-2">
              <svg viewBox="0 0 80 80">
                <defs>
                  <path id="a" d="M77.87 0C79.05 0 80 .95 80 2.13v75.74c0 1.17-.95 2.13-2.13 2.13H2.13C.96 80 0 79.04 0 77.87V2.13C0 .95.96 0 2.13 0h75.74z"></path>
                  <path id="b" d="M54 40c3.32 0 6 2.69 6 6 0 1.2 0-1.2 0 0 0 3.31-2.68 6-6 6H26c-3.31 0-6-2.69-6-6 0-1.2 0 1.2 0 0 0-3.31 2.69-6 6-6h28z"></path>
                  <path id="c" d="M0 0h80v17.24H0V0z"></path>
                </defs>
                <use xlink:href="#a" [attr.fill]="theme.backgroundColor"></use>
                <use xlink:href="#b" [attr.fill]="theme.buttonColor"></use>
                <use xlink:href="#c" [attr.fill]="theme.headerColor"></use>
              </svg>
            </mat-icon>

            <strong>{{ theme.labelName }}</strong>
          </button>

          <!-- List Of Help-Related Items -->
          <div mat-subheader>HELP ME</div>

          <button mat-list-item (click)="drawer.close(); openAboutDialog()">
            <strong>About&hellip;</strong>
          </button>

          <!-- List Of External Links And Resources -->
          <div mat-subheader>EXTERNAL LINKS</div>

          <a mat-list-item href="https://github.com/ehharding/Pocket-Fic" target="_blank">
            <img mat-list-icon alt="GitHub Logo" class="me-2 pf-github-logo" src="assets/images/other-logos/github.svg"/>
            <span>GitHub</span>
          </a>
        </mat-nav-list>

        <button mat-icon-button class="pf-fixed-close-button" tabindex="-1" (click)="drawer.close()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-drawer>

      <!-- The Drawer Content Represents The Contents Of The Drawer When The Sidenav Is Not Shown (i.e. The Main Page) -->
      <mat-drawer-content class="pf-app-content">
        <pf-toolbar class="mat-elevation-z5 pf-toolbar" [activeTheme]="activeTheme" [currentUser]="currentUser"
                    (openAboutDialog)="drawer.close(); openAboutDialog()" (openSidenav)="drawer.open()" (setApplicationTheme)="setApplicationTheme($event)">
        </pf-toolbar>

        <router-outlet></router-outlet>

        <pf-spinner-overlay *ngIf="isLoading" class="pf-spinner-overlay"></pf-spinner-overlay>
      </mat-drawer-content>
    </mat-drawer-container>
  </main>
</div>
