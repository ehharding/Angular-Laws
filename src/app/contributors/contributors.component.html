<header class="pf-contributors-header">
  <div class="row m-3">
    <div class="mx-auto pf-w-70">
      <h1 class="mat-h1 mt-2"><strong>Contributors</strong></h1>

      <p>This page lists the current contributors to the project.</p>
    </div>
  </div>
</header>

<div class="row m-3">
  <div class="mx-auto pf-w-70">
    <mat-accordion *ngIf="!contributorsFetchError" class="pf-headers-align">
      <mat-expansion-panel *ngFor="let contributor of allContributors; let index = index" [expanded]="index === 0"
        (closed)="panelOpen = false" (opened)="panelOpen = true" (mouseenter)="panelHovered = true" (mouseleave)="panelHovered = false">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon class="me-2">account_circle</mat-icon>
              <span class="pf-contributor-shift-animation" [@hover]="(panelHovered && !panelOpen) ? 'shiftedState' : 'normalState'" [@openClose]="panelOpen ? 'invisibleState' : 'visibleState'">
                <strong>{{ contributor.firstName }} {{ contributor.lastName }}</strong>
              </span>
            </mat-panel-title>

            <mat-panel-description class="pf-contributor-shift-animation"
              [@hover]="(panelHovered && !panelOpen) ? 'shiftedState' : 'normalState'" [@openClose]="panelOpen ? 'invisibleState' : 'visibleState'">
                {{ contributor.jobTitle }}
            </mat-panel-description>
          </mat-expansion-panel-header>

          <ng-template matExpansionPanelContent>
            <div class="d-flex justify-content-center">
              <mat-card class="mat-elevation-z0">
                <mat-card-header>
                  <img mat-card-avatar alt="{{ contributor.firstName }} {{ contributor.lastName }}'s Avatar" src="assets/avatars/{{ contributorNamesKebab[index] }}.jpeg"/>
                  <mat-card-title><strong>{{ contributor.firstName }} {{ contributor.lastName }}</strong></mat-card-title>
                  <mat-card-subtitle>{{ contributor.jobTitle }}</mat-card-subtitle>
                </mat-card-header>

                <mat-card-content>{{ contributor.personalSummary }}</mat-card-content>

                <mat-card-actions>
                  <!-- The First Contributor Card Action Button Is An Email Link -->
                  <a href="mailto:{{ contributor.email }}?subject=Subject&body=Hi%20{{ contributor.firstName }}">
                    <button mat-button [matTooltip]="contributor.email">
                      <mat-icon class="me-2">email</mat-icon>
                      <span>E-MAIL</span>
                    </button>
                  </a>

                  <!-- The Second Contributor Card Action Button Is A Link To The Respective Contributors' GitHub (Optional) -->
                  <a *ngIf="contributor.gitHub" target="_blank" [href]="contributor.gitHub">
                    <button mat-button>
                      <img alt="GitHub Logo" class="pf-card-footer-logo me-2" src="assets/images/other-logos/github-logo.svg"/>
                      <span>GITHUB</span>
                    </button>
                  </a>

                  <!-- The Third Contributor Card Action Button Is A Link To The Respective Contributors' LinkedIn (Optional) -->
                  <a *ngIf="contributor.linkedIn" target="_blank" [href]="contributor.linkedIn">
                    <button mat-button>
                      <img alt="LinkedIn Logo" class="pf-card-footer-logo me-2" src="assets/images/other-logos/linkedin-logo.svg"/>
                      <span>LINKEDIN</span>
                    </button>
                  </a>
                </mat-card-actions>
              </mat-card>
            </div>
          </ng-template>
      </mat-expansion-panel>
    </mat-accordion>

    <div *ngIf="contributorsFetchError" class="row">
      <div class="col">
        <h1 class="row mat-h1">
          <strong>An Error Occurred Fetching The List Of Contributors. Sorry About That!</strong>
          <mat-hint class="mat-h3">{{ contributorsFetchErrorInfo }}</mat-hint>
        </h1>

        <button mat-raised-button (click)="fetchAllContributors()">
          <mat-icon class="me-2">refresh</mat-icon>
          <span>RETRY</span>
        </button>
      </div>
    </div>
  </div>
</div>
